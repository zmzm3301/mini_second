<!DOCTYPE html>
{% load static %}
{% load recent_post %}
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Favicons -->
    <link href="{% static 'webapp/assets/img/favicon.png' %}" rel="icon">
    <link href="{% static 'webapp/assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
            rel="stylesheet">

    <!-- Vendor CSS Files -->

    <link href="{% static 'webapp/assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'webapp/assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'webapp/assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
    <link href="{% static 'webapp/assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
    <link href="{% static 'webapp/assets/vendor/remixicon/remixicon.css' %}" rel="stylesheet">
    <link href="{% static 'webapp/assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="{% static 'webapp/assets/css/style.css' %}" rel="stylesheet">

    <!-- =======================================================
    * Template Name: Tempo - v4.10.0
    * Template URL: https://bootstrapmade.com/tempo-free-onepage-bootstrap-theme/
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->

    <link rel="stylesheet" href="{% static 'webapp/bootstrap/bootstrap.min.css' %}" media="screen">

    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500&display=swap" rel="stylesheet">

</head>

<body>
{% include 'webapp/html/header.html' %}
{% include 'webapp/html/hero.html' %}
<main id="main">
    <!-- TODO: about.html로 옮겼을 때 충돌나는 부분 수정할 것 -->
    <!-- ======= About Section ======= -->
    <section id="about" class="about">
        <div class="container">

            <div class="section-title">
                <h2>Info</h2>
                <h3>OMO R1MINI <span>실시간 정보</span></h3>
                <p>실시간 정보를 입력할 수 있습니다.</p>
            </div>

            <div class="row content">
                <div class="section-title">

                    <!-- Project Card Example -->
                    {% if info_list %}
                    {% recent_posts 1 as posts %}
                    {% for p in posts %}

                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <div class="infoarea">
                                <h6 class="m-0 font-weight-bold text-primary" id="infoTITLE">INFO</h6>
                                {% if user.is_authenticated %}
                                <a href="" title="Button push blue/green" class="button btnPush btnBlueGreen"
                                   data-bs-toggle="modal"
                                   data-bs-target="#exampleModal">INPUT</a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="infoTop">
                                <div class="bat">
                                    <h4 class="small font-weight-bold">BATTERY<span class="float-right bat-fig"
                                                                                    id="bat-fig">
                        {{ p.battery }}
                      </span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress bat-prog" id="bat_prog" role="progressbar"
                                             aria-label="Animated striped example" aria-valuenow="20"
                                             aria-valuemin="0" aria-valuemax="100">
                                            <div class="progress-bar progress-bar-striped progress-bar-animated bat_prog_col"
                                                 id="bat_prog_col" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="infoBottom">
                                    <div class="colInfo mb-4">
                                        <div>
                                            <h4 class="small font-weight-bold color_box_fig">COLOR<span
                                                    class="float-right">

                        <div>
                          <input class="color_box_input" type="color" value="{{ p.color }}" disabled/>
                        </div>
                        </span></h4>
                                        </div>
                                    </div>
                                    <div class="runInfo mb-4">
                                        <div>
                                            <h4 class="small font-weight-bold runtime_fig">RUN TIME<span
                                                    class="float-right bat-fig">

                      <div>
                        <h3 class="runtime_info">
                          {{ p.runtime }}
                        </h3>
                      </div>

                      </span></h4>
                                        </div>
                                    </div>
                                    <div class="firmV mb-4">
                                        <h4 class="small font-weight-bold firmV_fig">firmV<span
                                                class="float-right bat-fig">
                      <div>
                        <h3 class="firmV_info">
                          {{ p.firmV }}
                        </h3>
                      </div>
                      </span></h4>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    {% endfor %}
                    {% else %}
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <div class="infoarea">
                                <h6 class="m-0 font-weight-bold text-primary infoTitle">INFO</h6>
                                {% if user.is_authenticated %}
                                <a href="" title="Button push blue/green" class="button btnPush btnBlueGreen"
                                   data-bs-toggle="modal"
                                   data-bs-target="#exampleModal">INPUT</a>
                                {% endif %}

                            </div>
                        </div>
                        <div class="card-body">
                            <div class="infoTop">
                                <div class="bat">
                                    <h4 class="small font-weight-bold">BATTERY<span class="float-right bat-fig">
                        0
                      </span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress bat-prog" role="progressbar"
                                             aria-label="Animated striped example" aria-valuenow="20"
                                             aria-valuemin="0" aria-valuemax="100">
                                            <div class="progress-bar progress-bar-striped progress-bar-animated bat_prog_col"
                                                 style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="infoBottom">
                                    <div class="colInfo mb-4">
                                        <div>
                                            <h4 class="small font-weight-bold color_box_fig">COLOR<span
                                                    class="float-right">

                        <div>
                          <input class="color_box_input" type="color" value="#000000" disabled/>
                        </div>
                        </span></h4>
                                        </div>
                                    </div>
                                    <div class="runInfo mb-4">
                                        <div>
                                            <h4 class="small font-weight-bold runtime_fig">RUN TIME<span
                                                    class="float-right bat-fig">

                      <div>
                        <h3 class="runtime_info">
                          0
                        </h3>
                      </div>

                      </span></h4>
                                        </div>
                                    </div>
                                    <div class="firmV mb-4">
                                        <h4 class="small font-weight-bold firmV_fig">firmV<span
                                                class="float-right bat-fig">
                      <div>
                        <h3>
                          NULL
                        </h3>
                      </div>
                      </span></h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

        </div>

        </div>


    </section><!-- End About Section -->

    {% include 'webapp/html/about.html' %}
    {% include 'webapp/html/accordion.html' %}
    {% include 'webapp/html/cta.html' %}
    {% include 'webapp/html/faq.html' %}
    {% include 'webapp/html/team.html' %}
    {% include 'webapp/html/contact.html' %}

</main><!-- End #main -->

<!-- Footer + Modal -->
{% include 'webapp/html/footer.html' %}
{% include 'webapp/html/omo_edit.html' %}
{% include 'webapp/html/login_temp.html' %}
{% include 'webapp/html/logout_temp.html' %}

<!--js -->
<div id="js">
    <!-- Vendor JS Files -->
    <script src="{% static 'webapp/assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'webapp/assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'webapp/assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'webapp/assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'webapp/assets/vendor/php-email-form/validate.js' %}"></script>


    <!-- Template Main JS File -->
    <script src="{% static 'webapp/assets/js/main.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/49d0ed2e0e.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
            integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <!-- 배터리 색상 -->
    <script>
    const bat_fig = document.querySelector('.bat-fig').innerText
    const bat_prog_bar = document.querySelector('.bat-prog')
    const bat_prog = document.querySelector('.bat_prog_col')

    bat_prog_bar.style.width = `${bat_fig}%`

    const color_box = document.querySelector('.color_box_input')
        if(bat_fig <= 20){
            bat_prog.style.backgroundColor = "#ff0000";
        }else if(bat_fig <= 40){
            bat_prog.style.backgroundColor = "#ff8000";
        }else if(bat_fig <= 60){
            bat_prog.style.backgroundColor = "#ffff00";
        }else if(bat_fig <= 80){
            bat_prog.style.backgroundColor = "#80ff00";
        }else if(bat_fig <= 100){
            bat_prog.style.backgroundColor = "#00ff00";
        }


    </script>

    <script>
document.querySelector('.robot_input').addEventListener('submit', (e) => {
const bat_fig = e.target.battery.value
bat_prog_bar.style.width = `${bat_fig}%`

if(bat_fig < 21){
bat_prog.style.backgroundColor = "#ff0000";
color_box.value = "#ff0000";
}else if(bat_fig < 41){
bat_prog.style.backgroundColor = "#ff8000";
color_box.value = "#ff8000";
}else if(bat_fig < 61){
bat_prog.style.backgroundColor = "#ffff00";
color_box.value = "#ffff00";
}else if(bat_fig < 81){
bat_prog.style.backgroundColor = "#80ff00";
color_box.value = "#80ff00";
}else if(bat_fig <= 100){
bat_prog.style.backgroundColor = "#00ff00";
color_box.value = "#00ff00";
}
})


    var $setRows = $('#setRows');

$setRows.submit(function (e) {
  e.preventDefault();
  var rowPerPage = $('[name="rowPerPage"]').val() * 1;// 1 을  곱하여 문자열을 숫자형로 변환

//    console.log(typeof rowPerPage);

  var zeroWarning = 'Sorry, but we cat\'t display "0" rows page. + \nPlease try again.'
  if (!rowPerPage) {
    alert(zeroWarning);
    return;
  }
  $('#review_nav').remove();
  var $products = $('#products');

  $products.after('<div id="review_nav">');


  var $tr = $($products).find('tr');
  var rowTotals = $tr.length;
//  console.log(rowTotals);

  var pageTotal = Math.ceil(rowTotals/ rowPerPage);
  var i = 0;

  for (; i < pageTotal; i++) {
    $('<a href="#"></a>')
        .attr('rel', i)
        .html(i + 1)
        .appendTo('#review_nav');
  }

  $tr.addClass('off-screen')
      .slice(0, rowPerPage)
      .removeClass('off-screen');

  var $pagingLink = $('#review_nav a');
  $pagingLink.on('click', function (evt) {
    evt.preventDefault();
    var $this = $(this);
    if ($this.hasClass('active')) {
      return;
    }
    $pagingLink.removeClass('active');
    $this.addClass('active');

    // 0 => 0(0*4), 4(0*4+4)
    // 1 => 4(1*4), 8(1*4+4)
    // 2 => 8(2*4), 12(2*4+4)
    // 시작 행 = 페이지 번호 * 페이지당 행수
    // 끝 행 = 시작 행 + 페이지당 행수

    var currPage = $this.attr('rel');
    var startItem = currPage * rowPerPage;
    var endItem = startItem + rowPerPage;

    $tr.css('opacity', '0.0')
        .addClass('off-screen')
        .slice(startItem, endItem)
        .removeClass('off-screen')
        .animate({opacity: 1}, 300);

  });

  $pagingLink.filter(':first').addClass('active');

});

$setRows.submit();

    </script>
    <script>
let p_run_time = document.querySelector('.runtime_info')
let accor_runtime = document.querySelector('#accor_runtime')
let second = parseInt(parseInt(p_run_time.innerText) / 1000);

let minute = parseInt(second / 60);
second = second % 60;

let hour   = parseInt(minute / 60);
minute = minute % 60;

let result = '';
if (hour > 0){
   result += hour + '시간 ';
}
if (minute > 0){
   result += minute + '분 ';
}
if (second > 0){
   result += second + '초';
}
if (!second && !minute && !hour){
  result = 'NULL';
}
p_run_time.innerText = result;
accor_runtime.innerText = result;

    </script>
</div>

</body>

</html>